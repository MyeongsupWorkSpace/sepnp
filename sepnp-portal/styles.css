/* 공통 레이아웃 */
:root {
  --bg: #f7f3f4;
  --card: #ffffff;
  --accent: #0078d4;
  --muted: #666;
  --border: #e3e3e3;
  --hover: #f0f6ff;
  --drop-zone: #f4f8ff;
  --drop-active: #e6f0ff;
}

/* 헤더/네비게이션 개선 */
.site-header {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 14px 20px;
  background: var(--card);
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  position: sticky;
  top: 0;
  z-index: 40;
  justify-content: center;
}

.brand {
  flex: 0 0 auto;
  margin: 0;
  font-size: 20px;
  font-weight: 700;
}

.main-nav {
  display: flex;
  gap: 36px;
  flex: 1;
  justify-content: center;
  max-width: 800px;
}

.main-nav a {
  color: #111;
  text-decoration: none;
  font-weight: 600;
  padding: 6px 12px;
  border-radius: 6px;
  transition: background-color 0.2s;
}

.main-nav a:hover {
  background: var(--hover);
}

.main-nav a.active {
  background: var(--accent);
  color: white;
}

/* 드래그 & 드롭 영역 개선 */
.machine-board {
  background: var(--card);
  padding: 16px;
  border-radius: 10px;
  min-height: 200px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  transition: box-shadow 0.2s;
}

.machine-board.dragover {
  box-shadow: 0 4px 12px rgba(0,120,212,0.15);
}

.machine-droppable {
  min-height: 100px;
  padding: 8px;
  border-radius: 8px;
  background: var(--drop-zone);
  border: 2px dashed var(--border);
  transition: all 0.2s ease-in-out;
}

.machine-droppable.dragover {
  background: var(--drop-active);
  border-color: var(--accent);
  transform: scale(1.01);
}

.slot {
  padding: 12px;
  margin: 8px 0;
  border-radius: 8px;
  background: white;
  border: 1px solid var(--border);
  cursor: grab;
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.02);
}

.slot:hover {
  border-color: var(--accent);
  box-shadow: 0 4px 8px rgba(0,0,0,0.04);
}

.slot.dragging {
  opacity: 0.6;
  transform: scale(1.02);
  box-shadow: 0 8px 16px rgba(0,0,0,0.08);
}

/* 애니메이션 효과 */
@keyframes dropIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.slot-enter {
  animation: dropIn 0.3s ease-out;
}

/* 나머지 기존 스타일 유지 */
*{box-sizing:border-box}
body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans",Arial; margin:0; background:var(--bg); color:#111}
.container{max-width:1100px;margin:28px auto;padding:0 16px}
.hero{display:flex;align-items:center;gap:20px;padding:28px;background:var(--card);border-radius:10px;box-shadow:0 6px 20px rgba(10,10,10,0.03)}
.hero-img{width:360px;height:220px;object-fit:cover;border-radius:8px}
.hero-text h1{margin:0;font-size:34px}
.tagline{margin:6px 0;font-weight:600}
.short{margin:8px 0;color:var(--muted)}
.buttons{margin-top:12px}
.btn{display:inline-block;padding:8px 14px;border-radius:8px;border:0;background:#ddd;color:#000;text-decoration:none;cursor:pointer}
.btn.primary{background:var(--accent);color:#fff}
.card{background:var(--card);padding:16px;border-radius:10px;margin-top:16px;box-shadow:0 6px 18px rgba(10,10,10,0.03)}
label{display:block;margin:8px 0}
input,select,textarea{padding:8px;border:1px solid #e3e3e3;border-radius:6px;width:100%;max-width:480px}
.form-actions{margin-top:12px}
.job-list{list-style:none;padding:0;margin:0}
.job-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px solid #f0f0f0}
.job-main{display:flex;gap:12px;align-items:center}
.job-main .product{color:var(--muted)}
.job-main .status{background:#f0f6ff;padding:4px 8px;border-radius:6px;color:var(--accent);font-weight:600}
.btn.small{padding:6px 10px;font-size:13px}
.empty{color:var(--muted);padding:12px}

/* header / nav (가운데 정렬) */
.site-header{
  display:flex;
  align-items:center;
  gap:20px;
  padding:14px 20px;
  background:var(--card);
  box-shadow:0 6px 18px rgba(10,10,10,0.03);
  position:sticky; top:0; z-index:40;
  justify-content:center; /* 전체 가운데 정렬 기준 */
}
.brand{flex:0 0 auto;margin:0;font-size:20px; text-align:center}
.main-nav{display:flex;gap:36px;flex:1;justify-content:center}
.main-nav a{color:#111;text-decoration:none;font-weight:600}
.hdr-actions{display:flex;align-items:center;gap:8px; position:absolute; right:18px;}

/* print plan table */
.plan-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
}

.plan-table th, .plan-table td {
    border: 1px solid #e3e3e3;
    padding: 8px;
    vertical-align: top;
}

.plan-table th {
    background: #f5f5f5;
    font-weight: 600;
    text-align: center;
    font-size: 14px;
    padding: 12px;
    user-select: none;
    position: sticky;
    top: 0;
    z-index: 10;
}

.plan-table th.machine-header {
    background: #e9ecef;
    color: #495057;
    width: 300px;  /* 각 열 너비 고정 */
    min-width: 300px;
    max-width: 300px;
}

.plan-item {
    background: #fff;
    border-radius: 4px;
    padding: 8px;
    margin: 4px;
    border: 1px solid #e3e3e3;
    cursor: grab;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.plan-item.dragging {
    opacity: 0.5;
    cursor: grabbing;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.plan-details {
    color: var(--muted);
    font-size: 12px;
    margin-top: 4px;
}

.machine-col {
    width: 300px;  /* 헤더와 동일한 너비 */
    min-width: 300px;
    max-width: 300px;
    background: #fafafa;
    vertical-align: top;
    height: 100px;  /* 최소 높이 설정 */
}

.machine-col.dragover {
    background: var(--drop-zone);
}

.machine-col.locked {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    cursor: not-allowed;
}

.plan-row-number {
    width: 50px;
    min-width: 50px;
    max-width: 50px;
    text-align: center;
    background: #fafafa;
    font-weight: 600;
}

/* droppable areas (machine columns) */
.machine-col{min-height:120px;padding:8px;border-radius:6px;background:#fff;box-shadow:inset 0 0 0 1px rgba(0,0,0,0.02)}
.slot{padding:6px;margin:6px 0;border-radius:6px;background:#f4f8ff;border:1px dashed #d7e7ff;cursor:grab}
.slot.dragging{opacity:0.6;border-style:solid;background:#e6f0ff}

/* product page layout */
.catalog-wrap{display:flex;gap:18px}
.catalog{width:36%;background:var(--card);padding:12px;border-radius:8px}
.board{flex:1;display:flex;gap:12px;align-items:flex-start}
.machine-board{flex:1;background:var(--card);padding:12px;border-radius:8px;min-height:200px}
.machine-board h3{text-align:center;margin-top:0}
.catalog-list{max-height:520px;overflow:auto}
.prod-item{padding:8px;margin:6px 0;border-radius:6px;background:#fff;border:1px solid #eee;cursor:grab}
.search{margin-bottom:8px}
.hidden{display:none !important}
.status-btn{padding:6px 10px;border-radius:8px;border:0;background:#f2f2f2;cursor:pointer}
.status-edit{padding:6px;border-radius:6px}

/* catalog / assign list: responsive grid, content-driven card sizing */
.catalog-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
  align-items: start;
  width: 100%;
  margin-top: 8px;
  box-sizing: border-box;
  padding: 0;
}

.prod-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: flex-start;
  justify-content: flex-start;
  background: #ffffff;
  border: 1px solid #e6e6e6;
  border-radius: 8px;
  padding: 10px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  box-sizing: border-box;
  word-break: break-word;
  white-space: normal;
  transition: box-shadow .12s ease, transform .08s ease;
  cursor: grab;
  align-self: start; /* 각 카드 높이가 가변이어도 그리드 정렬 유지 */
  min-height: 44px;
  max-height: none; /* 내용에 따라 늘어나게 */
  overflow: visible;
}

.prod-item:hover { box-shadow: 0 6px 18px rgba(0,0,0,0.06); transform: translateY(-2px); }

.prod-item .mini {
  font-size: 12px;
  color: var(--muted);
  line-height: 1.3;
  word-break: break-word;
}

/* 드래그 스타일 유지 */
.prod-item.dragging { opacity: 0.65; cursor: grabbing; transform: scale(.995); }

/* assign pool / product list wrapper 예외: 모바일에서 한 컬럼으로 */
@media (max-width: 520px) {
  .catalog-list { grid-template-columns: 1fr; }
  .prod-item { padding: 8px; }
}

/* 토스트 메시지 스타일 */
.toast {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  background: rgba(0,0,0,0.8);
  color: white;
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  transition: transform 0.3s ease-out;
  z-index: 100;
}

.toast.show {
  transform: translateX(-50%) translateY(0);
}

/* 인쇄계획표 스타일 */
.plan-table tr {
  cursor: move;
  transition: background-color 0.2s;
}

.plan-table tr:hover {
  background-color: var(--hover);
}

.plan-table tr.dragging {
  opacity: 0.5;
  background-color: var(--drop-active);
}

.machine-col.active {
  background-color: var(--drop-zone);
  font-weight: 600;
}

/* 드래그 중인 행의 위치 표시 */
.plan-table tr.drag-over {
  border-top: 2px solid var(--accent);
}

/* --- print plan fixed grid styles --- */
.plan-wrapper{background:var(--card);padding:18px;border-radius:10px}
.plan-header{ text-align:center;margin-bottom:8px }
.plan-sub{ text-align:center;color:var(--muted);margin-bottom:18px }

/* grid 기본 */
.plan-grid{display:grid;grid-template-columns:60px repeat(3,1fr);gap:8px;align-items:start}
/* 헤더 셀 */
.plan-grid .col-head{background:#eef2f5;padding:10px;border-radius:6px;text-align:center;font-weight:700;user-select:none}
.plan-grid .col-head.num{background:transparent;font-weight:600}

/* 슬롯 열 */
.slot-col{display:flex;flex-direction:column;gap:8px;padding:4px}
/* 각 슬롯(고정 크기) */
.slot{
  height:64px;             /* 고정 높이 */
  min-height:64px;
  max-height:64px;
  border-radius:6px;
  background:#fafafa;
  border:1px dashed #e6e9eb;
  display:flex;
  align-items:flex-start;
  padding:8px;
  overflow:hidden;
  box-sizing:border-box;
  transition:background .12s,box-shadow .12s,transform .08s;
}
.slot.empty{background:transparent;border:1px dashed #efefef}
.slot.occupied{background:#fff;border:1px solid #e3e3e3;box-shadow:0 1px 4px rgba(0,0,0,0.03)}
.slot .title{font-size:13px;font-weight:700;line-height:1.1;margin-bottom:4px}
.slot .meta{font-size:11px;color:var(--muted);line-height:1.2;}

/* drag feedback */
.slot.dragover{background: #e6f0ff;border-color:var(--accent);box-shadow:inset 0 0 0 2px rgba(0,120,212,0.06);transform:scale(1.01)}
.item-dragging{opacity:.6;transform:scale(.99);}

/* 왼쪽 행번호(column) */
.row-num{height:64px;display:flex;align-items:center;justify-content:center;background:transparent;border-radius:6px;color:var(--muted);font-weight:600}

/* 반응형: 너비가 좁으면 슬롯 높이 감소 */
@media(max-width:980px){
  .slot{height:56px;min-height:56px}
}

/* 토스트(간단) */
.toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%) translateY(100px);background:rgba(0,0,0,.8);color:#fff;padding:10px 14px;border-radius:6px;z-index:999;transition:transform .25s}
.toast.show{transform:translateX(-50%) translateY(0)}